From 5ec83cf6645c1334913731cb313faa5661d3f7a9 Mon Sep 17 00:00:00 2001
From: aniruddhgutta <aniruddhgutta@disroot.org>
Date: Sat, 18 Oct 2025 15:40:56 +0530
Subject: [PATCH 16/16] clang-default-to-fno-semantic-interposition

---
 clang/lib/Driver/ToolChains/Clang.cpp | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

diff --git a/clang/lib/Driver/ToolChains/Clang.cpp b/clang/lib/Driver/ToolChains/Clang.cpp
index 47e6c8a4e..aba1f79ac 100644
--- a/clang/lib/Driver/ToolChains/Clang.cpp
+++ b/clang/lib/Driver/ToolChains/Clang.cpp
@@ -5661,9 +5661,7 @@ void Clang::ConstructJob(Compilation &C, const JobAction &JA,
       // The supported targets need to call AsmPrinter::getSymbolPreferLocal.
       bool SupportsLocalAlias =
           Triple.isAArch64() || Triple.isRISCV() || Triple.isX86();
-      if (!A)
-        CmdArgs.push_back("-fhalf-no-semantic-interposition");
-      else if (A->getOption().matches(options::OPT_fsemantic_interposition))
+      if (A && A->getOption().matches(options::OPT_fsemantic_interposition))
         A->render(Args, CmdArgs);
       else if (!SupportsLocalAlias)
         CmdArgs.push_back("-fhalf-no-semantic-interposition");
-- 
2.51.0

